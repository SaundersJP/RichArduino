la r31,32768
la r30,36864
la r29,49152
la r28,53248
la r27,45056
la r26,40960
la r25,61440
la r24,57344
la r23,16384
la r4,16384
la r22,SET_LENGTH
la r21,CHECK_DATA_LOOP
la r20,SETUP_RECEIVE_USB
la r19,SETUP_RECEIVE_BT
la r18,CHECK_MESSAGE
la r17,RECEIVE_MESSAGE
la r16,CLEAR_SCREEN
addi r21,4096(r21)
addi r20,4096(r20)
addi r19,4096(r19)
addi r18,4096(r18)
addi r17,4096(r17)
addi r16,4096(r16)
addi r22,4096(r22)
la r15,67
la r14,77
la r13,66
la r12,84
la r11,32
la r10,0
la r9,0
la r8,0
la r7,0
la r6,0
la r5,33
CHECK_DATA_LOOP: ld r1,r31
andi r1,1(r1)
brnz r20,r1
ld r1,r29
andi r1,1(r1)
brnz r19,r1
br r21
SETUP_RECEIVE_USB: addi r10,0(r31)
addi r9,0(r30)
addi r8,0(r27)
addi r7,0(r26)
addi r6,0(r15)
addi r3,0(r14)
br r18
SETUP_RECEIVE_BT: addi r10,0(r29)
addi r9,0(r28)
addi r8,0(r25)
addi r7,0(r24)
addi r6,0(r13)
addi r3,0(r12)
br r18
CHECK_MESSAGE: ld r1,r9
st r15,r8
st r5,r7
andi r1,255(r1)
addi r2,-109(r1)
brzr r22,r2
addi r2,-99(r1)
brzr r16,r2
br r21
SET_LENGTH: ld r1,r10
andi r1,1(r1)
brzr r22,r1
st r6,r23
addi r23,4(r23)
st r3,r23
addi r23,4(r23)
st r11,r23
addi r23,4(r23)
ld r1,r9
andi r1,255(r1)
addi r6,0(r1)
st r14,r8
st r5,r7
br r17
RECEIVE_MESSAGE: ld r1,r10
andi r1,1(r1)
brzr r17,r1
ld r1,r9
andi r1,255(r1)
st r1,r23
st r5,r8
st r5,r7
addi r23,4(r23)
addi r6,-1(r6)
brnz r17,r6
addi r4,512(r4)
addi r23,0(r4)
br r21
CLEAR_SCREEN: la r23,16384
la r4,16384
la r6,30
la r3,80
la r1,CLEAR_SCREEN_LOOP
addi r1,4096(r1)
CLEAR_SCREEN_LOOP: st r11,r23
addi r23,4(r23)
addi r3,-1(r3)
brnz r1,r3
addi r6,-1(r6)
addi r4,512(r4)
addi r23,0(r4)
la r3,80
brnz r1,r6
la r23,16384
la r4,16384
br r21
